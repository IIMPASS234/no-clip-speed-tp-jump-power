-- FULL IIMPASS Hub GUI Script with Main + Teleport Tab (Save 2 Positions)
-- Place in StarterPlayerScripts

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "IIMPASS_Hub"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true

local savedSpeed = 16
local savedJump = 50
local noclip = false
local savedPositions = {nil, nil}

local function getCharacter()
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")
	return character, humanoid
end

local character, humanoid = getCharacter()

player.CharacterAdded:Connect(function()
	character, humanoid = getCharacter()
	task.wait(0.5)
	humanoid.WalkSpeed = savedSpeed
	humanoid.JumpPower = savedJump
end)

-- Main Frame
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 340, 0, 340)
mainFrame.Position = UDim2.new(0.5, -170, 0.5, -160)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Visible = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel", mainFrame)
title.Text = "IIMPASS Hub"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0, 5)
closeBtn.Text = "X"
closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
closeBtn.TextColor3 = Color3.fromRGB(255, 0, 0)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextScaled = true
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 8)

-- Tabs
local mainTabBtn = Instance.new("TextButton", mainFrame)
mainTabBtn.Size = UDim2.new(0, 80, 0, 30)
mainTabBtn.Position = UDim2.new(0, 10, 0, 45)
mainTabBtn.Text = "Main"
mainTabBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainTabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
mainTabBtn.Font = Enum.Font.GothamBold
mainTabBtn.TextScaled = true
Instance.new("UICorner", mainTabBtn).CornerRadius = UDim.new(0, 8)

local tpTabBtn = Instance.new("TextButton", mainFrame)
tpTabBtn.Size = UDim2.new(0, 80, 0, 30)
tpTabBtn.Position = UDim2.new(0, 100, 0, 45)
tpTabBtn.Text = "Teleport"
tpTabBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
tpTabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
tpTabBtn.Font = Enum.Font.GothamBold
tpTabBtn.TextScaled = true
Instance.new("UICorner", tpTabBtn).CornerRadius = UDim.new(0, 8)

local mainTab = Instance.new("Frame", mainFrame)
mainTab.Size = UDim2.new(1, -20, 1, -90)
mainTab.Position = UDim2.new(0, 10, 0, 80)
mainTab.BackgroundTransparency = 1

local tpTab = Instance.new("Frame", mainFrame)
tpTab.Size = UDim2.new(1, -20, 1, -90)
tpTab.Position = UDim2.new(0, 10, 0, 80)
tpTab.BackgroundTransparency = 1
tpTab.Visible = false

local function createLabelInput(text, posY, parent)
	local label = Instance.new("TextLabel", parent)
	label.Size = UDim2.new(0.4, -10, 0, 35)
	label.Position = UDim2.new(0.05, 0, 0, posY)
	label.BackgroundTransparency = 1
	label.Text = text
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.Font = Enum.Font.Gotham
	label.TextScaled = true

	local input = Instance.new("TextBox", parent)
	input.Size = UDim2.new(0.45, 0, 0, 35)
	input.Position = UDim2.new(0.5, 0, 0, posY)
	input.PlaceholderText = "Enter Value"
	input.Text = ""
	input.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	input.TextColor3 = Color3.fromRGB(255, 255, 255)
	input.Font = Enum.Font.GothamBold
	input.TextScaled = true
	Instance.new("UICorner", input).CornerRadius = UDim.new(0, 6)

	return input
end

local speedInput = createLabelInput("Speed", 0, mainTab)
speedInput.FocusLost:Connect(function()
	local val = tonumber(speedInput.Text)
	if val and val > 0 then
		savedSpeed = val
		humanoid.WalkSpeed = val
	end
end)

local jumpInput = createLabelInput("Jump Power", 50, mainTab)
jumpInput.FocusLost:Connect(function()
	local val = tonumber(jumpInput.Text)
	if val and val > 0 then
		savedJump = val
		humanoid.JumpPower = val
	end
end)

local noclipBtn = Instance.new("TextButton", mainTab)
noclipBtn.Size = UDim2.new(0.9, 0, 0, 35)
noclipBtn.Position = UDim2.new(0.05, 0, 0, 105)
noclipBtn.Text = "Toggle NoClip"
noclipBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
noclipBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
noclipBtn.Font = Enum.Font.GothamSemibold
noclipBtn.TextScaled = true
Instance.new("UICorner", noclipBtn).CornerRadius = UDim.new(0, 6)

noclipBtn.MouseButton1Click:Connect(function()
	noclip = not noclip
	noclipBtn.Text = noclip and "NoClip âœ…" or "Toggle NoClip"
end)

-- Teleport Tab Buttons
local tpInput = createLabelInput("Player Name", 0, tpTab)

local tpButton = Instance.new("TextButton", tpTab)
tpButton.Size = UDim2.new(0.9, 0, 0, 35)
tpButton.Position = UDim2.new(0.05, 0, 0, 50)
tpButton.Text = "Teleport"
tpButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
tpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
tpButton.Font = Enum.Font.GothamBold
tpButton.TextScaled = true
Instance.new("UICorner", tpButton).CornerRadius = UDim.new(0, 6)

tpButton.MouseButton1Click:Connect(function()
	local target = Players:FindFirstChild(tpInput.Text)
	if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
		local root = character and character:FindFirstChild("HumanoidRootPart")
		if root then
			root.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(2, 0, 0)
		end
	end
end)

local function createPosButton(text, index, posY)
	local btn = Instance.new("TextButton", tpTab)
	btn.Size = UDim2.new(0.9, 0, 0, 35)
	btn.Position = UDim2.new(0.05, 0, 0, posY)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.TextScaled = true
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
	return btn
end

local save1 = createPosButton("Save Position 1", 1, 100)
save1.MouseButton1Click:Connect(function()
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then savedPositions[1] = root.CFrame end
end)

local tp1 = createPosButton("Teleport to Position 1", 1, 140)
tp1.MouseButton1Click:Connect(function()
	if savedPositions[1] then
		local root = character:FindFirstChild("HumanoidRootPart")
		if root then root.CFrame = savedPositions[1] end
	end
end)

local save2 = createPosButton("Save Position 2", 2, 180)
save2.MouseButton1Click:Connect(function()
	local root = character:FindFirstChild("HumanoidRootPart")
	if root then savedPositions[2] = root.CFrame end
end)

local tp2 = createPosButton("Teleport to Position 2", 2, 220)
tp2.MouseButton1Click:Connect(function()
	if savedPositions[2] then
		local root = character:FindFirstChild("HumanoidRootPart")
		if root then root.CFrame = savedPositions[2] end
	end
end)

-- Tab Switching
mainTabBtn.MouseButton1Click:Connect(function()
	mainTab.Visible = true
	tpTab.Visible = false
end)

tpTabBtn.MouseButton1Click:Connect(function()
	mainTab.Visible = false
	tpTab.Visible = true
end)

closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

local openBtn = Instance.new("TextButton", screenGui)
openBtn.Size = UDim2.new(0, 160, 0, 40)
openBtn.Position = UDim2.new(0, 20, 1, -60)
openBtn.Text = "Open IIMPASS Hub"
openBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
openBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
openBtn.Font = Enum.Font.GothamBold
openBtn.TextScaled = true
Instance.new("UICorner", openBtn).CornerRadius = UDim.new(0, 8)

openBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
	if mainFrame.Visible then
		humanoid.WalkSpeed = savedSpeed
		humanoid.JumpPower = savedJump
	end
end)

-- Close All Button
local closeAllBtn = Instance.new("TextButton", screenGui)
closeAllBtn.Size = UDim2.new(0, 160, 0, 40)
closeAllBtn.Position = UDim2.new(0, 190, 1, -60)
closeAllBtn.Text = "Close All"
closeAllBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
closeAllBtn.TextColor3 = Color3.fromRGB(255, 85, 85)
closeAllBtn.Font = Enum.Font.GothamBold
closeAllBtn.TextScaled = true
Instance.new("UICorner", closeAllBtn).CornerRadius = UDim.new(0, 8)

closeAllBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	savedSpeed = 16
	savedJump = 50
	noclip = false
	savedPositions = {nil, nil}
	humanoid.WalkSpeed = savedSpeed
	humanoid.JumpPower = savedJump
	speedInput.Text = ""
	jumpInput.Text = ""
	noclipBtn.Text = "Toggle NoClip"
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.X then
		mainFrame.Visible = not mainFrame.Visible
		if mainFrame.Visible then
			humanoid.WalkSpeed = savedSpeed
			humanoid.JumpPower = savedJump
		end
	elseif input.KeyCode == Enum.KeyCode.Z then
		closeAllBtn:Activate()
	end
end)

RunService.Stepped:Connect(function()
	if noclip and character then
		local root = character:FindFirstChild("HumanoidRootPart")
		if root then root.CanCollide = false end
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") and part.CanCollide then
				part.CanCollide = false
			end
		end
	end
end)
